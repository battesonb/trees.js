!function e(t,r,i){function n(l,s){if(!r[l]){if(!t[l]){var a="function"==typeof require&&require;if(!s&&a)return a(l,!0);if(o)return o(l,!0);var c=new Error("Cannot find module '"+l+"'");throw c.code="MODULE_NOT_FOUND",c}var d=r[l]={exports:{}};t[l][0].call(d.exports,function(e){var r=t[l][1][e];return n(r?r:e)},d,d.exports,e,t,r,i)}return r[l].exports}for(var o="function"==typeof require&&require,l=0;l<i.length;l++)n(i[l]);return n}({1:[function(e,t,r){(function(r){function i(e,t){if(void 0===i)var i=r.document;this.dom=i.getElementById(e),t||(t={}),t.clear?this.clearable=t.clear:this.clearable=!1,t.height?(this.dom.setAttribute("height",t.height+"px"),this.height=t.height):(this.height=Number(this.dom.getAttribute("height")),0==this.height&&(this.height=200,this.dom.setAttribute("height",this.height+"px"))),t.width?(this.dom.setAttribute("width",t.width+"px"),this.width=t.width):(this.width=Number(this.dom.getAttribute("width")),0==this.width&&(this.width=200,this.dom.setAttribute("width",this.width+"px"))),t.scale?this.scale=t.scale:this.scale=1,this.coords={x:0,y:0},this.setScale(this.scale);var n=this;this.dom.addEventListener("wheel",function(e){n.setScale(n.scale+e.deltaY/2e3,{ex:e.clientX,ey:e.clientY})})}function n(e,t,r){e.selectedNode&&(e.selectedNode._rect.style.fill=e.current.fill,e.selectedNode._rect.style.stroke=e.current.stroke),e.selectedNode=t,e.current.fill=t._rect.style.fill,e.current.stroke=t._rect.style.stroke,r||(r={}),r.fill?e.selectedNode._rect.style.fill=r.fill:e.selectedNode._rect.style.fill="#33DD33",r.stroke?e.selectedNode._rect.style.stroke=r.strokea:e.selectedNode._rect.style.stroke="#11BB11"}function o(e,t){if(t._line&&e.removeElement(t._line),t._direction&&e.removeElement(t._direction),e.removeElement(t._rect),e.removeElement(t._text),t.parent)for(var r=t.parent.children,i=0;i<r.length;i++)if(r[i]==t)return r.splice(i,1),t;return null}function l(e,t,r,i,n,o,a){if(a||(a={}),r){var c=r.x,d=r.y;if(r.x=n*e.scale-t.dragging.anchorX,r.y=o*e.scale-t.dragging.anchorY,e.moveRectangle(r._rect,r.x,r.y),e.moveText(r._text,r.x,r.y),r._offset=s(r,i),r._direction&&e.moveCircle(r._direction,r.x+r._offset.x,r.y+r._offset.y),r.children)for(var h=0;h<r.children.length;h++)r.children[h]._direction&&(r.children[h]._offset=s(r.children[h],r),e.moveCircle(r.children[h]._direction,r.children[h].x+r.children[h]._offset.x,r.children[h].y+r.children[h]._offset.y));if("bezier"==a.lineType){r._line&&e.resetBezier(r._line,i.x+r._offset.parX,i.y+r._offset.parY,r.x+r._offset.x,r.y+r._offset.y);for(var h=0;h<r.children.length;h++)r.children[h]._line&&("descendents"==a.anchor?e.moveBezier(r.children[h]._line,r.x+r.children[h]._offset.parX,r.y+r.children[h]._offset.parY,r.children[h].x+r.children[h]._offset.x,r.children[h].y+r.children[h]._offset.y):e.resetBezier(r.children[h]._line,r.x+r.children[h]._offset.parX,r.y+r.children[h]._offset.parY,r.children[h].x+r.children[h]._offset.x,r.children[h].y+r.children[h]._offset.y))}else{r._line&&e.moveLine(r._line,i.x+r._offset.parX,i.y+r._offset.parY,r.x+r._offset.x,r.y+r._offset.y);for(var h=0;h<r.children.length;h++)r.children[h]._line&&e.moveLine(r.children[h]._line,r.x+r.children[h]._offset.parX,r.y+r.children[h]._offset.parY,r.children[h].x+r.children[h]._offset.x,r.children[h].y+r.children[h]._offset.y)}if("children"==a.anchor)for(var h=0;h<r.children.length;h++)l(e,t,r.children[h],r,(r.children[h].x+r.x-c+t.dragging.anchorX)/e.scale,(r.children[h].y+r.y-d+t.dragging.anchorY)/e.scale,{anchor:"none",lineType:a.lineType});else if("descendents"==a.anchor)for(var h=0;h<r.children.length;h++)l(e,t,r.children[h],r,(r.children[h].x+r.x-c+t.dragging.anchorX)/e.scale,(r.children[h].y+r.y-d+t.dragging.anchorY)/e.scale,{anchor:"descendents",lineType:a.lineType})}else t.dragging.dom&&(t.traverse(function(r,i,l,s){r.x+=n*e.scale-t.dragging.currX,r.y+=o*e.scale-t.dragging.currY,e.moveRectangle(r._rect,r.x,r.y),e.moveText(r._text,r.x,r.y),r._line&&("bezier"==a.lineType?e.moveBezier(r._line,s.x+r._offset.parX,s.y+r._offset.parY):e.moveLine(r._line,s.x+r._offset.parX,s.y+r._offset.parY)),r._direction&&e.moveCircle(r._direction,r.x+r._offset.x,r.y+r._offset.y)}),t.dragging.currX=n*e.scale,t.dragging.currY=o*e.scale)}function s(e,t,r){if(!t)return{x:0,y:0,parX:0,parY:0};r||(r={});var i={};return"vertical"==r.layout?e.y>t.y+t._rect.height.baseVal.value?(i.parY=t._rect.height.baseVal.value,i.y=0,i.parX=t._rect.width.baseVal.value/2,i.x=e._rect.width.baseVal.value/2):e.y+e._rect.height.baseVal.value<t.y?(i.parY=0,i.y=e._rect.height.baseVal.value,i.parX=t._rect.width.baseVal.value/2,i.x=e._rect.width.baseVal.value/2):e.x>t.x+t._rect.width.baseVal.value?(i.parY=t._rect.height.baseVal.value/2,i.y=e._rect.height.baseVal.value/2,i.parX=t._rect.width.baseVal.value,i.x=0):(i.parY=t._rect.height.baseVal.value/2,i.y=e._rect.height.baseVal.value/2,i.parX=0,i.x=e._rect.width.baseVal.value):e.x>t.x+t._rect.width.baseVal.value?(i.parX=t._rect.width.baseVal.value,i.x=0,i.parY=t._rect.height.baseVal.value/2,i.y=e._rect.height.baseVal.value/2):e.x+e._rect.width.baseVal.value<t.x?(i.parX=0,i.x=e._rect.width.baseVal.value,i.parY=t._rect.height.baseVal.value/2,i.y=e._rect.height.baseVal.value/2):e.y>t.y+t._rect.height.baseVal.value?(i.parX=t._rect.width.baseVal.value/2,i.x=e._rect.width.baseVal.value/2,i.parY=t._rect.height.baseVal.value,i.y=0):(i.parX=t._rect.width.baseVal.value/2,i.x=e._rect.width.baseVal.value/2,i.parY=0,i.y=e._rect.height.baseVal.value),i}var a=e("./Tree");i.prototype.setScale=function(e,t){var r=this.scale*this.width,i=this.scale*this.height;if(this.scale=e,this.scale<.1)this.scale=.1;else{t||(t={});var n="";t.ex&&(this.coords.x-=t.ex/this.width*(this.width*e-r)),t.ey&&(this.coords.y-=t.ey/this.height*(this.height*e-i)),n+=this.coords.x+" "+this.coords.y+" "+this.width*this.scale+" "+this.height*this.scale,this.dom.setAttribute("viewBox",n)}},i.prototype.setAnchor=function(e){this.anchor=e},i.prototype.setSelectedAction=function(e){this.selectedAction=e},i.prototype.addBezier=function(e,t,r,i,n){var o=document.createElementNS("http://www.w3.org/2000/svg","path"),l=(e+r)/2,s=t,a=(e+r)/2,c=i;return o.setAttribute("d","M0 0 C"+(l-e)+" "+(s-t)+" "+(a-e)+" "+(c-t)+" "+(r-e)+" "+(i-t)),o.setAttribute("transform","translate("+e+","+t+")"),o.style.fill="none",n||(n={}),n.stroke?o.style.stroke=n.stroke:o.style.stroke="#000",n.strokeWidth?o.style.strokeWidth=n.strokeWidth:o.style.strokeWidth="2px",this.dom.insertBefore(o,this.dom.firstChild),o},i.prototype.resetBezier=function(e,t,r,i,n){var o=(t+i)/2,l=r,s=(t+i)/2,a=n;e.setAttribute("d","M0 0 C"+(o-t)+" "+(l-r)+" "+(s-t)+" "+(a-r)+" "+(i-t)+" "+(n-r)),e.setAttribute("transform","translate("+t+","+r+")")},i.prototype.moveBezier=function(e,t,r){e.setAttribute("transform","translate("+t+","+r+")")},i.prototype.addCircle=function(e,t,r,i){var n=document.createElementNS("http://www.w3.org/2000/svg","circle");return n.setAttribute("cx",e),n.setAttribute("cy",t),n.setAttribute("r",r),i||(i={}),i.fill?n.style.fill=i.fill:n.style.fill="#FFF",i.stroke?n.style.stroke=i.stroke:n.style.stroke="#000",i.strokeWidth?n.style.strokeWidth=i.strokeWidth:n.style.strokeWidth="2px",this.dom.appendChild(n),n},i.prototype.moveCircle=function(e,t,r){e.setAttribute("cx",t),e.setAttribute("cy",r)},i.prototype.addLine=function(e,t,r,i,n){var o=document.createElementNS("http://www.w3.org/2000/svg","line");return o.setAttribute("x1",e),o.setAttribute("y1",t),o.setAttribute("x2",r),o.setAttribute("y2",i),n.stroke?o.style.stroke=n.stroke:o.style.stroke="#000",n.strokeWidth?o.style.strokeWidth=n.strokeWidth:o.style.strokeWidth="2px",this.dom.appendChild(o),o},i.prototype.moveLine=function(e,t,r,i,n){if(i)e.setAttribute("x1",t),e.setAttribute("y1",r),e.setAttribute("x2",i),n&&e.setAttribute("y2",n);else{var o=t-parseFloat(e.getAttribute("x1")),l=r-parseFloat(e.getAttribute("y1"));e.setAttribute("x1",t),e.setAttribute("y1",r),e.setAttribute("x2",parseFloat(e.getAttribute("x2"))+o),e.setAttribute("y2",parseFloat(e.getAttribute("y2"))+l)}};var c=5;i.prototype.addRectangle=function(e,t,r,i,n,o,l){var s=document.createElementNS("http://www.w3.org/2000/svg","rect");if(n&&s.setAttribute("rx",n),o&&s.setAttribute("ry",o),l||(l={}),l.fill?s.style.fill=l.fill:s.style.fill="#FFF",l.stroke?s.style.stroke=l.stroke:s.style.stroke="#000",l.strokeWidth?s.style.strokeWidth=l.strokeWidth:s.style.strokeWidth="1px",l.opacity&&s.setAttribute("fill-opacity",l.opacity),l.child){var a=l.child.getBBox();s.setAttribute("x",e),s.setAttribute("y",t),s.setAttribute("width",a.width+2*c),s.setAttribute("height",a.height+2*c),l.child.parentNode.insertBefore(s,l.child)}else s.setAttribute("x",e),s.setAttribute("y",t),s.setAttribute("width",r),s.setAttribute("height",i),this.dom.appendChild(s);return s},i.prototype.moveRectangle=function(e,t,r,i){i||(i={}),e.setAttribute("x",t),e.setAttribute("y",r)},i.prototype.addText=function(e,t,r,i){var n=document.createElementNS("http://www.w3.org/2000/svg","text");return n.innerHTML=r,n.setAttribute("alignment-baseline","central"),n.setAttribute("pointer-events","none"),n.setAttribute("x",e+c),i||(i={}),i.fill?n.setAttribute("fill",i.fill):n.setAttribute("fill","#000"),this.dom.appendChild(n),n.setAttribute("y",t+c+n.getBBox().height/2),n},i.prototype.moveText=function(e,t,r){e.setAttribute("x",t+c),e.setAttribute("y",r+c+e.getBBox().height/2)},i.prototype.clear=function(){this.dom.innerHTML=""},i.prototype.removeElement=function(e){this.dom.removeChild(e)},i.prototype.removeNode=function(e,t){if(void 0!==t&&!t){for(var r=[e];r.length>0;){for(var i=r.splice(0,1)[0],n=0;n<i.children.length;n++)r.push(i.children[n]);o(this,i)}return e}return 0==e.children.length?o(this,e):void 0},i.prototype.drawTree=function(e,t){var r=this;r.selectedNode=null,t||(t={}),r.current={},r.defaults={},t.fill?r.defaults.fill=t.fill:r.defaults.fill="#BBDDFF",t.stroke?r.defaults.stroke=t.stroke:r.defaults.stroke="#6688BB",t.rootFill?r.defaults.rootFill=t.rootFill:r.defaults.rootFill="#FF6666",t.rootStroke?r.defaults.rootStroke=t.rootStroke:r.defaults.rootStroke="#DD2222",t.lineStroke?r.defaults.lineStroke=t.lineStroke:r.defaults.lineStroke=r.defaults.stroke,t.cornerRadius?r.defaults.cornerRadius=t.cornerRadius:r.defaults.cornerRadius=2,r.clearable&&r.clear();var i=new a(e);i.traverse(function(e,t,i,n){e.contents&&(e._text=r.addText(0,0,e.contents));var o;o=n?r.addRectangle(0,0,5,5,r.defaults.cornerRadius,r.defaults.cornerRadius,{fill:r.defaults.fill,stroke:r.defaults.stroke,child:e._text}):r.addRectangle(0,0,5,5,r.defaults.cornerRadius,r.defaults.cornerRadius,{fill:r.defaults.rootFill,stroke:r.defaults.rootStroke,child:e._text}),e._rect=o}),i.initialize(),i.traverse(function(e,i,n,o){r.moveText(e._text,e.x,e.y),r.moveRectangle(e._rect,e.x,e.y);var l=s(e,o);e._offset=l,o&&("bezier"==t.lineType?e._line=r.addBezier(o.x+l.parX,o.y+l.parY,e.x+l.x,e.y+l.y,{stroke:r.defaults.lineStroke}):(t.lineType="line",e._line=r.addLine(o.x+l.parX,o.y+l.parY,e.x+l.x,e.y+l.y,{stroke:r.defaults.lineStroke})),e._direction=r.addCircle(e.x+l.x,e.y+l.y,2,{fill:r.defaults.lineStroke,stroke:r.defaults.lineStroke}))}),t.anchor||(t.anchor="none"),r.anchor=t.anchor,i.dragging={},i.traverse(function(e,t,o,l){e._rect.addEventListener("mousedown",function(t){n(r,e),i.dragging.node=e,i.dragging.parent=l,i.dragging.anchorX=t.clientX*r.scale-e.x,i.dragging.anchorY=t.clientY*r.scale-e.y,r.selectedAction&&r.selectedAction(r.selectedNode)}),e._rect.addEventListener("touchstart",function(t){n(r,e),i.dragging.node=e,i.dragging.parent=l,i.dragging.anchorX=t.touches[0].clientX*r.scale-e.x,i.dragging.anchorY=t.touches[0].clientY*r.scale-e.y,r.selectedAction&&r.selectedAction(r.selectedNode)})}),r.dom.addEventListener("mousedown",function(e){e.target==r.dom&&(i.dragging.dom=!0,i.dragging.currX=e.clientX*r.scale,i.dragging.currY=e.clientY*r.scale)}),r.dom.addEventListener("touchstart",function(e){e.target==r.dom&&(i.dragging.dom=!0,i.dragging.currX=e.touches[0].clientX*r.scale,i.dragging.currY=e.touches[0].clientY*r.scale)}),r.dom.addEventListener("mousemove",function(e){l(r,i,i.dragging.node,i.dragging.parent,e.clientX,e.clientY,{lineType:t.lineType,anchor:r.anchor})}),r.dom.addEventListener("touchmove",function(e){l(r,i,i.dragging.node,i.dragging.parent,e.touches[0].clientX,e.touches[0].clientY,{lineType:t.lineType,anchor:r.anchor})}),r.dom.addEventListener("mouseup",function(e){i.dragging.node=void 0,i.dragging.dom=!1}),r.dom.addEventListener("touchend",function(e){i.dragging.node=void 0,i.dragging.dom=!1})},t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Tree":2}],2:[function(e,t,r){"use strict";function i(e){this.root=e}function n(e,t,r,i,o){if(void 0!=e&&void 0!=t&&(void 0==r&&(r=0),void 0==i&&(i=0),t(e,r,i,o),e.children))for(var l=0;l<e.children.length;l++)n(e.children[l],t,r+1,l,e)}function o(e,t,r,i){if(void 0!=e&&void 0!=t){void 0==r&&(r=0),void 0==i&&(i=0);var n=[],o=[];for(n.push(e);n.length>0;){var l=n.splice(0,1)[0];if(i++,l.children)for(var s=0;s<l.children.length;s++){var a=l.children[s];a.parent=l,o.push(a)}t(l,r,i),0===n.length&&(n=o,o=[],r++,i=0)}}}function l(e){void 0===e?this.contents="":this.contents=e,this.children=[]}var s=10;i.prototype.initialize=function(){var e=this.root;i.maxIndex||(i.maxIndex=0);var t=i.maxIndex;null!=e&&(o(e,function(e,r,n){n+1>i.maxIndex&&(i.maxIndex=n+1),e.hasOwnProperty("x")||(e.x=165*r),e.hasOwnProperty("y")||(e.y=(n+t)*(e._rect.height.baseVal.value+s))}),i.maxIndex+=t)},i.prototype.traverse=function(e){n(this.root,e)},i.prototype.traverseBFS=function(e){o(this.root,e)},l.prototype.addChild=function(e){var t=new l(e);return this.children.push(t),t},l.prototype.removeChild=function(e){for(var t=0;t<this.children.length;t++)if(this.children[t]===e)return this.children.pop(e),e;return null},t.exports=i},{}],3:[function(e,t,r){var i=e("../component/SVG"),n={SVG:i};t.exports=n},{"../component/SVG":1}],4:[function(e,t,r){"use strict";window.trees=t.exports=e("./core/init")},{"./core/init":3}]},{},[4]);