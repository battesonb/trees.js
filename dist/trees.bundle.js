!function t(e,r,i){function n(a,s){if(!r[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var c=r[a]={exports:{}};e[a][0].call(c.exports,function(t){var r=e[a][1][t];return n(r?r:t)},c,c.exports,t,e,r,i)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)n(i[a]);return n}({1:[function(t,e,r){function i(t,e){this.dom=document.getElementById(t),e?(e.width?(this.dom.setAttribute("width",e.width+"px"),this.width=e.width):(this.dom.setAttribute("width","200px"),this.width=200),e.height?(this.dom.setAttribute("height",e.height+"px"),this.height=e.height):(this.dom.setAttribute("height","200px"),this.height=200)):(this.width=Number(this.dom.getAttribute("width")),0==this.width&&(this.width=200,this.dom.setAttribute("width",this.width+"px")),this.height=Number(this.dom.getAttribute("height")),0==this.height&&(this.height=200,this.dom.setAttribute("height",this.height+"px")))}function n(t,e,r,i,a,s,l){if(l||(l={}),r){var h=r.x,c=r.y;r.x=a-t.dragging.anchorX,r.y=s-t.dragging.anchorY,t.moveRectangle(r.rect,r.x,r.y),t.moveText(r.text,r.x,r.y);var d=o(r,i);if(r.offset=d,r.direction&&t.moveCircle(r.direction,r.x+r.offset.x,r.y+r.offset.y),r.children)for(var u=0;u<r.children.length;u++)r.children[u].direction&&(r.children[u].offset=o(r.children[u],r),t.moveCircle(r.children[u].direction,r.children[u].x+r.children[u].offset.x,r.children[u].y+r.children[u].offset.y));if("bezier"==l.lineType){r.line&&t.resetBezier(r.line,i.x+r.offset.parX,i.y+r.offset.parY,r.x+r.offset.x,r.y+r.offset.y);for(var u=0;u<r.children.length;u++)r.children[u].line&&t.resetBezier(r.children[u].line,r.x+r.children[u].offset.parX,r.y+r.children[u].offset.parY,r.children[u].x+r.children[u].offset.x,r.children[u].y+r.children[u].offset.y)}else{r.line&&t.moveLine(r.line,i.x+r.offset.parX,i.y+r.offset.parY,r.x+r.offset.x,r.y+r.offset.y);for(var u=0;u<r.children.length;u++)r.children[u].line&&t.moveLine(r.children[u].line,r.x+r.children[u].offset.parX,r.y+r.children[u].offset.parY,r.children[u].x+r.children[u].offset.x,r.children[u].y+r.children[u].offset.y)}if("parent"==l.anchor)for(var u=0;u<r.children.length;u++)n(t,e,r.children[u],r,r.children[u].x+r.x-h+t.dragging.anchorX,r.children[u].y+r.y-c+t.dragging.anchorY)}else t.dragging.dom&&(e.traverse(function(e,r,i,n){e.x+=a-t.dragging.currX,e.y+=s-t.dragging.currY,t.moveRectangle(e.rect,e.x,e.y),t.moveText(e.text,e.x,e.y);var h=o(e,n);e.offset=h,e.line&&("bezier"==l.lineType?t.moveBezier(e.line,n.x+e.offset.parX,n.y+e.offset.parY):t.moveLine(e.line,n.x+e.offset.parX,n.y+e.offset.parY)),e.direction&&t.moveCircle(e.direction,e.x+e.offset.x,e.y+e.offset.y)}),t.dragging.currX=a,t.dragging.currY=s)}function o(t,e,r){if(!e)return{x:0,y:0,parX:0,parY:0};r||(r={});var i={};return"vertical"==r.layout?t.y>e.y+e.rect.height.baseVal.value?(i.parY=e.rect.height.baseVal.value,i.y=0,i.parX=e.rect.width.baseVal.value/2,i.x=t.rect.width.baseVal.value/2):t.y+t.rect.height.baseVal.value<e.y?(i.parY=0,i.y=t.rect.height.baseVal.value,i.parX=e.rect.width.baseVal.value/2,i.x=t.rect.width.baseVal.value/2):t.x>e.x+e.rect.width.baseVal.value?(i.parY=e.rect.height.baseVal.value/2,i.y=t.rect.height.baseVal.value/2,i.parX=e.rect.width.baseVal.value,i.x=0):(i.parY=e.rect.height.baseVal.value/2,i.y=t.rect.height.baseVal.value/2,i.parX=0,i.x=t.rect.width.baseVal.value):t.x>e.x+e.rect.width.baseVal.value?(i.parX=e.rect.width.baseVal.value,i.x=0,i.parY=e.rect.height.baseVal.value/2,i.y=t.rect.height.baseVal.value/2):t.x+t.rect.width.baseVal.value<e.x?(i.parX=0,i.x=t.rect.width.baseVal.value,i.parY=e.rect.height.baseVal.value/2,i.y=t.rect.height.baseVal.value/2):t.y>e.y+e.rect.height.baseVal.value?(i.parX=e.rect.width.baseVal.value/2,i.x=t.rect.width.baseVal.value/2,i.parY=e.rect.height.baseVal.value,i.y=0):(i.parX=e.rect.width.baseVal.value/2,i.x=t.rect.width.baseVal.value/2,i.parY=0,i.y=t.rect.height.baseVal.value),i}i.prototype.addBezier=function(t,e,r,i,n){var o=document.createElementNS("http://www.w3.org/2000/svg","path"),a=(t+r)/2,s=e,l=(t+r)/2,h=i;return o.setAttribute("d","M0 0 C"+(a-t)+" "+(s-e)+" "+(l-t)+" "+(h-e)+" "+(r-t)+" "+(i-e)),o.setAttribute("transform","translate("+t+","+e+")"),o.style.fill="none",n||(n={}),n.stroke?o.style.stroke=n.stroke:o.style.stroke="#000",n.strokeWidth?o.style.strokeWidth=n.strokeWidth:o.style.strokeWidth="2px",this.dom.insertBefore(o,this.dom.firstChild),o},i.prototype.resetBezier=function(t,e,r,i,n){var o=(e+i)/2,a=r,s=(e+i)/2,l=n;t.setAttribute("d","M0 0 C"+(o-e)+" "+(a-r)+" "+(s-e)+" "+(l-r)+" "+(i-e)+" "+(n-r)),t.setAttribute("transform","translate("+e+","+r+")")},i.prototype.moveBezier=function(t,e,r){t.setAttribute("transform","translate("+e+","+r+")")},i.prototype.addCircle=function(t,e,r,i){var n=document.createElementNS("http://www.w3.org/2000/svg","circle");return n.setAttribute("cx",t),n.setAttribute("cy",e),n.setAttribute("r",r),i||(i={}),i.fill?n.style.fill=i.fill:n.style.fill="#FFF",i.stroke?n.style.stroke=i.stroke:n.style.stroke="#000",i.strokeWidth?n.style.strokeWidth=i.strokeWidth:n.style.strokeWidth="2px",this.dom.appendChild(n),n},i.prototype.moveCircle=function(t,e,r){t.setAttribute("cx",e),t.setAttribute("cy",r)},i.prototype.addLine=function(t,e,r,i,n){var o=document.createElementNS("http://www.w3.org/2000/svg","line");return o.setAttribute("x1",t),o.setAttribute("y1",e),o.setAttribute("x2",r),o.setAttribute("y2",i),n.stroke?o.style.stroke=n.stroke:o.style.stroke="#000",this.dom.appendChild(o),o},i.prototype.moveLine=function(t,e,r,i,n){if(i)t.setAttribute("x1",e),t.setAttribute("y1",r),t.setAttribute("x2",i),n&&t.setAttribute("y2",n);else{var o=e-parseFloat(t.getAttribute("x1")),a=r-parseFloat(t.getAttribute("y1"));t.setAttribute("x1",e),t.setAttribute("y1",r),t.setAttribute("x2",parseFloat(t.getAttribute("x2"))+o),t.setAttribute("y2",parseFloat(t.getAttribute("y2"))+a)}};var a=5;i.prototype.addRectangle=function(t,e,r,i,n,o,s){var l=document.createElementNS("http://www.w3.org/2000/svg","rect");if(n&&l.setAttribute("rx",n),o&&l.setAttribute("ry",o),s||(s={}),s.fill?l.style.fill=s.fill:l.style.fill="#FFF",s.stroke?l.style.stroke=s.stroke:l.style.stroke="#000",s.strokeWidth?l.style.strokeWidth=s.strokeWidth:l.style.strokeWidth="1px",s.opacity&&l.setAttribute("fill-opacity",s.opacity),s.child){var h=s.child.getBBox();l.setAttribute("x",t),l.setAttribute("y",e),l.setAttribute("width",h.width+2*a),l.setAttribute("height",h.height+2*a),s.child.parentNode.insertBefore(l,s.child)}else l.setAttribute("x",t),l.setAttribute("y",e),l.setAttribute("width",r),l.setAttribute("height",i),this.dom.appendChild(l);return l},i.prototype.moveRectangle=function(t,e,r,i){i||(i={}),t.setAttribute("x",e),t.setAttribute("y",r)},i.prototype.addText=function(t,e,r,i){var n=document.createElementNS("http://www.w3.org/2000/svg","text");return n.innerHTML=r,n.setAttribute("alignment-baseline","central"),n.setAttribute("pointer-events","none"),n.setAttribute("x",t+a),i||(i={}),i.fill?n.setAttribute("fill",i.fill):n.setAttribute("fill","black"),this.dom.appendChild(n),n.setAttribute("y",e+a+n.getBBox().height/2),n},i.prototype.moveText=function(t,e,r){t.setAttribute("x",e+a),t.setAttribute("y",r+a+t.getBBox().height/2)},i.prototype.clear=function(){this.dom.innerHTML=""},i.prototype.drawTree=function(t,e){var r=this;r.clear(),e||(e={}),t.traverse(function(t,e,i,n){if(t.contents){var o=r.addText(0,0,t.contents);t.text=o}if(n)var a=r.addRectangle(0,0,5,5,2,2,{fill:"#BBDDFF",stroke:"#88AADD",child:t.text});else var a=r.addRectangle(0,0,5,5,2,2,{fill:"#FF6666",stroke:"#DD2222",child:t.text});t.rect=a}),t.initialize(),t.traverse(function(t,i,n,a){r.moveText(t.text,t.x,t.y),r.moveRectangle(t.rect,t.x,t.y);var s=o(t,a);if(t.offset=s,a){if("bezier"==e.lineType){var l=r.addBezier(a.x+s.parX,a.y+s.parY,t.x+s.x,t.y+s.y,{stroke:"#6688BB"});t.line=l}else{e.lineType="line";var h=r.addLine(a.x+s.parX,a.y+s.parY,t.x+s.x,t.y+s.y,{stroke:"#6688BB"});t.line=h}t.direction=r.addCircle(t.x+s.x,t.y+s.y,2,{fill:"#6688BB",stroke:"#5577AA"})}}),r.dragging={},t.traverse(function(t,e,i,n){t.rect.onmousedown=function(e){r.dragging.node=t,r.dragging.parent=n,r.dragging.anchorX=e.clientX-t.x,r.dragging.anchorY=e.clientY-t.y},t.rect.addEventListener("touchstart",function(e){r.dragging.node=t,r.dragging.parent=n,r.dragging.anchorX=e.touches[0].clientX-t.x,r.dragging.anchorY=e.touches[0].clientY-t.y})}),r.dom.onmousedown=function(t){t.target==r.dom&&(r.dragging.dom=!0,r.dragging.currX=t.clientX,r.dragging.currY=t.clientY)},r.dom.addEventListener("touchstart",function(t){t.target==r.dom&&(r.dragging.dom=!0,r.dragging.currX=t.touches[0].clientX,r.dragging.currY=t.touches[0].clientY)}),r.dom.onmousemove=function(i){n(r,t,r.dragging.node,r.dragging.parent,i.clientX,i.clientY,{lineType:e.lineType,anchor:e.anchor})},r.dom.addEventListener("touchmove",function(i){n(r,t,r.dragging.node,r.dragging.parent,i.touches[0].clientX,i.touches[0].clientY,{lineType:e.lineType,anchor:e.anchor})}),r.dom.onmouseup=function(t){r.dragging.node=void 0,r.dragging.dom=!1},r.dom.addEventListener("touchend",function(t){r.dragging.node=void 0,r.dragging.dom=!1})},e.exports=i},{}],2:[function(t,e,r){"use strict";function i(t){this.root=new o(t)}function n(t,e,r,i,o){if(void 0!=t){void 0==r&&(r=0),e(t,r,i,o);for(var a=0;a<t.children.length;a++)n(t.children[a],e,r+1,a,t)}}function o(t){void 0===t?this.contents="":this.contents=t,this.children=[]}var a=50;i.prototype.initialize=function(){var t=this.root;null!=t&&n(t,function(t,e,r,i){t.hasOwnProperty("x")||(t.x=150*e),t.hasOwnProperty("y")||(0===e?t.y=0:1===i.children.length?t.y=0:t.y=r*t.rect.height.baseVal.value+a*(r/i.children.length))})},i.prototype.traverse=function(t){n(this.root,t)},o.prototype.addChild=function(t){var e=new o(t);return this.children.push(e),e},o.prototype.removeChild=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e]===t)return this.children.pop(t),t;return null},e.exports=i},{}],3:[function(t,e,r){var i={SVG:t("../component/SVG"),Tree:t("../component/Tree")};e.exports=i},{"../component/SVG":1,"../component/Tree":2}],4:[function(t,e,r){"use strict";window.trees=t("./core/init")},{"./core/init":3}]},{},[4]);