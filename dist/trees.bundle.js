!function t(e,r,i){function n(a,l){if(!r[a]){if(!e[a]){var s="function"==typeof require&&require;if(!l&&s)return s(a,!0);if(o)return o(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var c=r[a]={exports:{}};e[a][0].call(c.exports,function(t){var r=e[a][1][t];return n(r?r:t)},c,c.exports,t,e,r,i)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)n(i[a]);return n}({1:[function(t,e,r){function i(t,e){this.dom=document.getElementById(t),e||(e={}),e.clear?this.clearable=e.clear:this.clearable=!1,e.height?(this.dom.setAttribute("height",e.height+"px"),this.height=e.height):(this.height=Number(this.dom.getAttribute("height")),0==this.height&&(this.height=200,this.dom.setAttribute("height",this.height+"px"))),e.width?(this.dom.setAttribute("width",e.width+"px"),this.width=e.width):(this.width=Number(this.dom.getAttribute("width")),0==this.width&&(this.width=200,this.dom.setAttribute("width",this.width+"px")))}function n(t,e,r,i,a,l,s){if(s||(s={}),r){var h=r.x,c=r.y;r.x=a-e.dragging.anchorX,r.y=l-e.dragging.anchorY,t.moveRectangle(r.rect,r.x,r.y),t.moveText(r.text,r.x,r.y);var d=o(r,i);if(r.offset=d,r.direction&&t.moveCircle(r.direction,r.x+r.offset.x,r.y+r.offset.y),r.children)for(var u=0;u<r.children.length;u++)r.children[u].direction&&(r.children[u].offset=o(r.children[u],r),t.moveCircle(r.children[u].direction,r.children[u].x+r.children[u].offset.x,r.children[u].y+r.children[u].offset.y));if("bezier"==s.lineType){r.line&&t.resetBezier(r.line,i.x+r.offset.parX,i.y+r.offset.parY,r.x+r.offset.x,r.y+r.offset.y);for(var u=0;u<r.children.length;u++)r.children[u].line&&t.resetBezier(r.children[u].line,r.x+r.children[u].offset.parX,r.y+r.children[u].offset.parY,r.children[u].x+r.children[u].offset.x,r.children[u].y+r.children[u].offset.y)}else{r.line&&t.moveLine(r.line,i.x+r.offset.parX,i.y+r.offset.parY,r.x+r.offset.x,r.y+r.offset.y);for(var u=0;u<r.children.length;u++)r.children[u].line&&t.moveLine(r.children[u].line,r.x+r.children[u].offset.parX,r.y+r.children[u].offset.parY,r.children[u].x+r.children[u].offset.x,r.children[u].y+r.children[u].offset.y)}if("parent"==s.anchor)for(var u=0;u<r.children.length;u++)n(t,e,r.children[u],r,r.children[u].x+r.x-h+e.dragging.anchorX,r.children[u].y+r.y-c+e.dragging.anchorY);else if("tree"==s.anchor)for(var u=0;u<r.children.length;u++)n(t,e,r.children[u],r,r.children[u].x+r.x-h+e.dragging.anchorX,r.children[u].y+r.y-c+e.dragging.anchorY,{anchor:"tree"})}else e.dragging.dom&&(e.traverse(function(r,i,n,o){r.x+=a-e.dragging.currX,r.y+=l-e.dragging.currY,t.moveRectangle(r.rect,r.x,r.y),t.moveText(r.text,r.x,r.y),r.line&&("bezier"==s.lineType?t.moveBezier(r.line,o.x+r.offset.parX,o.y+r.offset.parY):t.moveLine(r.line,o.x+r.offset.parX,o.y+r.offset.parY)),r.direction&&t.moveCircle(r.direction,r.x+r.offset.x,r.y+r.offset.y)}),e.dragging.currX=a,e.dragging.currY=l)}function o(t,e,r){if(!e)return{x:0,y:0,parX:0,parY:0};r||(r={});var i={};return"vertical"==r.layout?t.y>e.y+e.rect.height.baseVal.value?(i.parY=e.rect.height.baseVal.value,i.y=0,i.parX=e.rect.width.baseVal.value/2,i.x=t.rect.width.baseVal.value/2):t.y+t.rect.height.baseVal.value<e.y?(i.parY=0,i.y=t.rect.height.baseVal.value,i.parX=e.rect.width.baseVal.value/2,i.x=t.rect.width.baseVal.value/2):t.x>e.x+e.rect.width.baseVal.value?(i.parY=e.rect.height.baseVal.value/2,i.y=t.rect.height.baseVal.value/2,i.parX=e.rect.width.baseVal.value,i.x=0):(i.parY=e.rect.height.baseVal.value/2,i.y=t.rect.height.baseVal.value/2,i.parX=0,i.x=t.rect.width.baseVal.value):t.x>e.x+e.rect.width.baseVal.value?(i.parX=e.rect.width.baseVal.value,i.x=0,i.parY=e.rect.height.baseVal.value/2,i.y=t.rect.height.baseVal.value/2):t.x+t.rect.width.baseVal.value<e.x?(i.parX=0,i.x=t.rect.width.baseVal.value,i.parY=e.rect.height.baseVal.value/2,i.y=t.rect.height.baseVal.value/2):t.y>e.y+e.rect.height.baseVal.value?(i.parX=e.rect.width.baseVal.value/2,i.x=t.rect.width.baseVal.value/2,i.parY=e.rect.height.baseVal.value,i.y=0):(i.parX=e.rect.width.baseVal.value/2,i.x=t.rect.width.baseVal.value/2,i.parY=0,i.y=t.rect.height.baseVal.value),i}var a=t("./Tree");i.prototype.setAnchor=function(t){this.anchor=t},i.prototype.addBezier=function(t,e,r,i,n){var o=document.createElementNS("http://www.w3.org/2000/svg","path"),a=(t+r)/2,l=e,s=(t+r)/2,h=i;return o.setAttribute("d","M0 0 C"+(a-t)+" "+(l-e)+" "+(s-t)+" "+(h-e)+" "+(r-t)+" "+(i-e)),o.setAttribute("transform","translate("+t+","+e+")"),o.style.fill="none",n||(n={}),n.stroke?o.style.stroke=n.stroke:o.style.stroke="#000",n.strokeWidth?o.style.strokeWidth=n.strokeWidth:o.style.strokeWidth="2px",this.dom.insertBefore(o,this.dom.firstChild),o},i.prototype.resetBezier=function(t,e,r,i,n){var o=(e+i)/2,a=r,l=(e+i)/2,s=n;t.setAttribute("d","M0 0 C"+(o-e)+" "+(a-r)+" "+(l-e)+" "+(s-r)+" "+(i-e)+" "+(n-r)),t.setAttribute("transform","translate("+e+","+r+")")},i.prototype.moveBezier=function(t,e,r){t.setAttribute("transform","translate("+e+","+r+")")},i.prototype.addCircle=function(t,e,r,i){var n=document.createElementNS("http://www.w3.org/2000/svg","circle");return n.setAttribute("cx",t),n.setAttribute("cy",e),n.setAttribute("r",r),i||(i={}),i.fill?n.style.fill=i.fill:n.style.fill="#FFF",i.stroke?n.style.stroke=i.stroke:n.style.stroke="#000",i.strokeWidth?n.style.strokeWidth=i.strokeWidth:n.style.strokeWidth="2px",this.dom.appendChild(n),n},i.prototype.moveCircle=function(t,e,r){t.setAttribute("cx",e),t.setAttribute("cy",r)},i.prototype.addLine=function(t,e,r,i,n){var o=document.createElementNS("http://www.w3.org/2000/svg","line");return o.setAttribute("x1",t),o.setAttribute("y1",e),o.setAttribute("x2",r),o.setAttribute("y2",i),n.stroke?o.style.stroke=n.stroke:o.style.stroke="#000",n.strokeWidth?o.style.strokeWidth=n.strokeWidth:o.style.strokeWidth="2px",this.dom.appendChild(o),o},i.prototype.moveLine=function(t,e,r,i,n){if(i)t.setAttribute("x1",e),t.setAttribute("y1",r),t.setAttribute("x2",i),n&&t.setAttribute("y2",n);else{var o=e-parseFloat(t.getAttribute("x1")),a=r-parseFloat(t.getAttribute("y1"));t.setAttribute("x1",e),t.setAttribute("y1",r),t.setAttribute("x2",parseFloat(t.getAttribute("x2"))+o),t.setAttribute("y2",parseFloat(t.getAttribute("y2"))+a)}};var l=5;i.prototype.addRectangle=function(t,e,r,i,n,o,a){var s=document.createElementNS("http://www.w3.org/2000/svg","rect");if(n&&s.setAttribute("rx",n),o&&s.setAttribute("ry",o),a||(a={}),a.fill?s.style.fill=a.fill:s.style.fill="#FFF",a.stroke?s.style.stroke=a.stroke:s.style.stroke="#000",a.strokeWidth?s.style.strokeWidth=a.strokeWidth:s.style.strokeWidth="1px",a.opacity&&s.setAttribute("fill-opacity",a.opacity),a.child){var h=a.child.getBBox();s.setAttribute("x",t),s.setAttribute("y",e),s.setAttribute("width",h.width+2*l),s.setAttribute("height",h.height+2*l),a.child.parentNode.insertBefore(s,a.child)}else s.setAttribute("x",t),s.setAttribute("y",e),s.setAttribute("width",r),s.setAttribute("height",i),this.dom.appendChild(s);return s},i.prototype.moveRectangle=function(t,e,r,i){i||(i={}),t.setAttribute("x",e),t.setAttribute("y",r)},i.prototype.addText=function(t,e,r,i){var n=document.createElementNS("http://www.w3.org/2000/svg","text");return n.innerHTML=r,n.setAttribute("alignment-baseline","central"),n.setAttribute("pointer-events","none"),n.setAttribute("x",t+l),i||(i={}),i.fill?n.setAttribute("fill",i.fill):n.setAttribute("fill","#000"),this.dom.appendChild(n),n.setAttribute("y",e+l+n.getBBox().height/2),n},i.prototype.moveText=function(t,e,r){t.setAttribute("x",e+l),t.setAttribute("y",r+l+t.getBBox().height/2)},i.prototype.clear=function(){this.dom.innerHTML=""},i.prototype.drawTree=function(t,e){var r=this;e||(e={}),r.clearable&&r.clear();var i,l,s=new a(t);s.traverse(function(t,n,o,a){if(t.contents){var s=r.addText(0,0,t.contents);t.text=s}if(a){i=e.fill?e.fill:"#BBDDFF",l=e.stroke?e.stroke:"#88AADD";var h=r.addRectangle(0,0,5,5,2,2,{fill:i,stroke:l,child:t.text})}else{i=e.rootFill?e.rootFill:"#FF6666",l=e.rootStroke?e.rootStroke:"#DD2222";var h=r.addRectangle(0,0,5,5,2,2,{fill:i,stroke:l,child:t.text})}t.rect=h}),s.initialize(),s.traverse(function(t,i,n,a){r.moveText(t.text,t.x,t.y),r.moveRectangle(t.rect,t.x,t.y);var l=o(t,a);if(t.offset=l,a){if("bezier"==e.lineType){var s=r.addBezier(a.x+l.parX,a.y+l.parY,t.x+l.x,t.y+l.y,{stroke:"#6688BB"});t.line=s}else{e.lineType="line";var h=r.addLine(a.x+l.parX,a.y+l.parY,t.x+l.x,t.y+l.y,{stroke:"#6688BB"});t.line=h}t.direction=r.addCircle(t.x+l.x,t.y+l.y,2,{fill:"#6688BB",stroke:"#5577AA"})}}),e.anchor||(e.anchor="none"),r.anchor=e.anchor,s.dragging={},s.traverse(function(t,e,r,i){t.rect.addEventListener("mousedown",function(e){s.dragging.node=t,s.dragging.parent=i,s.dragging.anchorX=e.clientX-t.x,s.dragging.anchorY=e.clientY-t.y}),t.rect.addEventListener("touchstart",function(e){s.dragging.node=t,s.dragging.parent=i,s.dragging.anchorX=e.touches[0].clientX-t.x,s.dragging.anchorY=e.touches[0].clientY-t.y})}),r.dom.addEventListener("mousedown",function(t){t.target==r.dom&&(s.dragging.dom=!0,s.dragging.currX=t.clientX,s.dragging.currY=t.clientY)}),r.dom.addEventListener("touchstart",function(t){t.target==r.dom&&(s.dragging.dom=!0,s.dragging.currX=t.touches[0].clientX,s.dragging.currY=t.touches[0].clientY)}),r.dom.addEventListener("mousemove",function(t){n(r,s,s.dragging.node,s.dragging.parent,t.clientX,t.clientY,{lineType:e.lineType,anchor:r.anchor})}),r.dom.addEventListener("touchmove",function(t){n(r,s,s.dragging.node,s.dragging.parent,t.touches[0].clientX,t.touches[0].clientY,{lineType:e.lineType,anchor:r.anchor})}),r.dom.addEventListener("mouseup",function(t){s.dragging.node=void 0,s.dragging.dom=!1}),r.dom.addEventListener("touchend",function(t){s.dragging.node=void 0,s.dragging.dom=!1})},e.exports=i},{"./Tree":2}],2:[function(t,e,r){"use strict";function i(t){this.root=t}function n(t,e,r,i,o){if(void 0!=t&&void 0!=e&&(void 0==r&&(r=0),void 0==i&&(i=0),e(t,r,i,o),t.children))for(var a=0;a<t.children.length;a++)n(t.children[a],e,r+1,a,t)}function o(t,e,r,i){if(void 0!=t&&void 0!=e){void 0==r&&(r=0),void 0==i&&(i=0);var n=[],o=[];for(n.push(t);n.length>0;){var a=n.splice(0,1)[0];if(e(a,r,i),i++,a.children)for(var l=0;l<a.children.length;l++)o.push(a.children[l]);0==n.length&&(n=o,o=[],r++,i=0)}}}function a(t){void 0===t?this.contents="":this.contents=t,this.children=[]}var l=10;i.prototype.initialize=function(){var t=this.root;null!=t&&o(t,function(t,e,r){t.hasOwnProperty("x")||(t.x=165*e),t.hasOwnProperty("y")||(t.y=r*(t.rect.height.baseVal.value+l))})},i.prototype.traverse=function(t){n(this.root,t)},i.prototype.traverseBFS=function(t){o(this.root,t)},a.prototype.addChild=function(t){var e=new a(t);return this.children.push(e),e},a.prototype.removeChild=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e]===t)return this.children.pop(t),t;return null},e.exports=i},{}],3:[function(t,e,r){var i=t("../component/SVG"),n={SVG:i};e.exports=n},{"../component/SVG":1}],4:[function(t,e,r){"use strict";window.trees=t("./core/init")},{"./core/init":3}]},{},[4]);