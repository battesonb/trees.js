!function e(t,r,i){function n(l,a){if(!r[l]){if(!t[l]){var s="function"==typeof require&&require;if(!a&&s)return s(l,!0);if(o)return o(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var c=r[l]={exports:{}};t[l][0].call(c.exports,function(e){var r=t[l][1][e];return n(r?r:e)},c,c.exports,e,t,r,i)}return r[l].exports}for(var o="function"==typeof require&&require,l=0;l<i.length;l++)n(i[l]);return n}({1:[function(e,t,r){function i(e,t){this.dom=document.getElementById(e),t||(t={}),t.clear?this.clearable=t.clear:this.clearable=!1,t.height?(this.dom.setAttribute("height",t.height+"px"),this.height=t.height):(this.height=Number(this.dom.getAttribute("height")),0==this.height&&(this.height=200,this.dom.setAttribute("height",this.height+"px"))),t.width?(this.dom.setAttribute("width",t.width+"px"),this.width=t.width):(this.width=Number(this.dom.getAttribute("width")),0==this.width&&(this.width=200,this.dom.setAttribute("width",this.width+"px")))}function n(e,t,r){e.selectedNode&&(e.selectedNode.rect.style.fill=e.current.fill,e.selectedNode.rect.style.stroke=e.current.stroke),e.selectedNode=t,e.current.fill=t.rect.style.fill,e.current.stroke=t.rect.style.stroke,r||(r={}),r.fill?e.selectedNode.rect.style.fill=r.fill:e.selectedNode.rect.style.fill="#33DD33",r.stroke?e.selectedNode.rect.style.stroke=r.strokea:e.selectedNode.rect.style.stroke="#11BB11"}function o(e,t,r,i,n,a,s){if(s||(s={}),r){var d=r.x,c=r.y;r.x=n-t.dragging.anchorX,r.y=a-t.dragging.anchorY,e.moveRectangle(r.rect,r.x,r.y),e.moveText(r.text,r.x,r.y);var h=l(r,i);if(r.offset=h,r.direction&&e.moveCircle(r.direction,r.x+r.offset.x,r.y+r.offset.y),r.children)for(var u=0;u<r.children.length;u++)r.children[u].direction&&(r.children[u].offset=l(r.children[u],r),e.moveCircle(r.children[u].direction,r.children[u].x+r.children[u].offset.x,r.children[u].y+r.children[u].offset.y));if("bezier"==s.lineType){r.line&&e.resetBezier(r.line,i.x+r.offset.parX,i.y+r.offset.parY,r.x+r.offset.x,r.y+r.offset.y);for(var u=0;u<r.children.length;u++)r.children[u].line&&("descendents"==s.anchor?e.moveBezier(r.children[u].line,r.x+r.children[u].offset.parX,r.y+r.children[u].offset.parY,r.children[u].x+r.children[u].offset.x,r.children[u].y+r.children[u].offset.y):e.resetBezier(r.children[u].line,r.x+r.children[u].offset.parX,r.y+r.children[u].offset.parY,r.children[u].x+r.children[u].offset.x,r.children[u].y+r.children[u].offset.y))}else{r.line&&e.moveLine(r.line,i.x+r.offset.parX,i.y+r.offset.parY,r.x+r.offset.x,r.y+r.offset.y);for(var u=0;u<r.children.length;u++)r.children[u].line&&e.moveLine(r.children[u].line,r.x+r.children[u].offset.parX,r.y+r.children[u].offset.parY,r.children[u].x+r.children[u].offset.x,r.children[u].y+r.children[u].offset.y)}if("children"==s.anchor)for(var u=0;u<r.children.length;u++)o(e,t,r.children[u],r,r.children[u].x+r.x-d+t.dragging.anchorX,r.children[u].y+r.y-c+t.dragging.anchorY,{anchor:"none",lineType:s.lineType});else if("descendents"==s.anchor)for(var u=0;u<r.children.length;u++)o(e,t,r.children[u],r,r.children[u].x+r.x-d+t.dragging.anchorX,r.children[u].y+r.y-c+t.dragging.anchorY,{anchor:"descendents",lineType:s.lineType})}else t.dragging.dom&&(t.traverse(function(r,i,o,l){r.x+=n-t.dragging.currX,r.y+=a-t.dragging.currY,e.moveRectangle(r.rect,r.x,r.y),e.moveText(r.text,r.x,r.y),r.line&&("bezier"==s.lineType?e.moveBezier(r.line,l.x+r.offset.parX,l.y+r.offset.parY):e.moveLine(r.line,l.x+r.offset.parX,l.y+r.offset.parY)),r.direction&&e.moveCircle(r.direction,r.x+r.offset.x,r.y+r.offset.y)}),t.dragging.currX=n,t.dragging.currY=a)}function l(e,t,r){if(!t)return{x:0,y:0,parX:0,parY:0};r||(r={});var i={};return"vertical"==r.layout?e.y>t.y+t.rect.height.baseVal.value?(i.parY=t.rect.height.baseVal.value,i.y=0,i.parX=t.rect.width.baseVal.value/2,i.x=e.rect.width.baseVal.value/2):e.y+e.rect.height.baseVal.value<t.y?(i.parY=0,i.y=e.rect.height.baseVal.value,i.parX=t.rect.width.baseVal.value/2,i.x=e.rect.width.baseVal.value/2):e.x>t.x+t.rect.width.baseVal.value?(i.parY=t.rect.height.baseVal.value/2,i.y=e.rect.height.baseVal.value/2,i.parX=t.rect.width.baseVal.value,i.x=0):(i.parY=t.rect.height.baseVal.value/2,i.y=e.rect.height.baseVal.value/2,i.parX=0,i.x=e.rect.width.baseVal.value):e.x>t.x+t.rect.width.baseVal.value?(i.parX=t.rect.width.baseVal.value,i.x=0,i.parY=t.rect.height.baseVal.value/2,i.y=e.rect.height.baseVal.value/2):e.x+e.rect.width.baseVal.value<t.x?(i.parX=0,i.x=e.rect.width.baseVal.value,i.parY=t.rect.height.baseVal.value/2,i.y=e.rect.height.baseVal.value/2):e.y>t.y+t.rect.height.baseVal.value?(i.parX=t.rect.width.baseVal.value/2,i.x=e.rect.width.baseVal.value/2,i.parY=t.rect.height.baseVal.value,i.y=0):(i.parX=t.rect.width.baseVal.value/2,i.x=e.rect.width.baseVal.value/2,i.parY=0,i.y=e.rect.height.baseVal.value),i}var a=e("./Tree");i.prototype.setAnchor=function(e){this.anchor=e},i.prototype.addBezier=function(e,t,r,i,n){var o=document.createElementNS("http://www.w3.org/2000/svg","path"),l=(e+r)/2,a=t,s=(e+r)/2,d=i;return o.setAttribute("d","M0 0 C"+(l-e)+" "+(a-t)+" "+(s-e)+" "+(d-t)+" "+(r-e)+" "+(i-t)),o.setAttribute("transform","translate("+e+","+t+")"),o.style.fill="none",n||(n={}),n.stroke?o.style.stroke=n.stroke:o.style.stroke="#000",n.strokeWidth?o.style.strokeWidth=n.strokeWidth:o.style.strokeWidth="2px",this.dom.insertBefore(o,this.dom.firstChild),o},i.prototype.resetBezier=function(e,t,r,i,n){var o=(t+i)/2,l=r,a=(t+i)/2,s=n;e.setAttribute("d","M0 0 C"+(o-t)+" "+(l-r)+" "+(a-t)+" "+(s-r)+" "+(i-t)+" "+(n-r)),e.setAttribute("transform","translate("+t+","+r+")")},i.prototype.moveBezier=function(e,t,r){e.setAttribute("transform","translate("+t+","+r+")")},i.prototype.addCircle=function(e,t,r,i){var n=document.createElementNS("http://www.w3.org/2000/svg","circle");return n.setAttribute("cx",e),n.setAttribute("cy",t),n.setAttribute("r",r),i||(i={}),i.fill?n.style.fill=i.fill:n.style.fill="#FFF",i.stroke?n.style.stroke=i.stroke:n.style.stroke="#000",i.strokeWidth?n.style.strokeWidth=i.strokeWidth:n.style.strokeWidth="2px",this.dom.appendChild(n),n},i.prototype.moveCircle=function(e,t,r){e.setAttribute("cx",t),e.setAttribute("cy",r)},i.prototype.addLine=function(e,t,r,i,n){var o=document.createElementNS("http://www.w3.org/2000/svg","line");return o.setAttribute("x1",e),o.setAttribute("y1",t),o.setAttribute("x2",r),o.setAttribute("y2",i),n.stroke?o.style.stroke=n.stroke:o.style.stroke="#000",n.strokeWidth?o.style.strokeWidth=n.strokeWidth:o.style.strokeWidth="2px",this.dom.appendChild(o),o},i.prototype.moveLine=function(e,t,r,i,n){if(i)e.setAttribute("x1",t),e.setAttribute("y1",r),e.setAttribute("x2",i),n&&e.setAttribute("y2",n);else{var o=t-parseFloat(e.getAttribute("x1")),l=r-parseFloat(e.getAttribute("y1"));e.setAttribute("x1",t),e.setAttribute("y1",r),e.setAttribute("x2",parseFloat(e.getAttribute("x2"))+o),e.setAttribute("y2",parseFloat(e.getAttribute("y2"))+l)}};var s=5;i.prototype.addRectangle=function(e,t,r,i,n,o,l){var a=document.createElementNS("http://www.w3.org/2000/svg","rect");if(n&&a.setAttribute("rx",n),o&&a.setAttribute("ry",o),l||(l={}),l.fill?a.style.fill=l.fill:a.style.fill="#FFF",l.stroke?a.style.stroke=l.stroke:a.style.stroke="#000",l.strokeWidth?a.style.strokeWidth=l.strokeWidth:a.style.strokeWidth="1px",l.opacity&&a.setAttribute("fill-opacity",l.opacity),l.child){var d=l.child.getBBox();a.setAttribute("x",e),a.setAttribute("y",t),a.setAttribute("width",d.width+2*s),a.setAttribute("height",d.height+2*s),l.child.parentNode.insertBefore(a,l.child)}else a.setAttribute("x",e),a.setAttribute("y",t),a.setAttribute("width",r),a.setAttribute("height",i),this.dom.appendChild(a);return a},i.prototype.moveRectangle=function(e,t,r,i){i||(i={}),e.setAttribute("x",t),e.setAttribute("y",r)},i.prototype.addText=function(e,t,r,i){var n=document.createElementNS("http://www.w3.org/2000/svg","text");return n.innerHTML=r,n.setAttribute("alignment-baseline","central"),n.setAttribute("pointer-events","none"),n.setAttribute("x",e+s),i||(i={}),i.fill?n.setAttribute("fill",i.fill):n.setAttribute("fill","#000"),this.dom.appendChild(n),n.setAttribute("y",t+s+n.getBBox().height/2),n},i.prototype.moveText=function(e,t,r){e.setAttribute("x",t+s),e.setAttribute("y",r+s+e.getBBox().height/2)},i.prototype.clear=function(){this.dom.innerHTML=""},i.prototype.drawTree=function(e,t){var r=this;r.selectedNode=null,t||(t={}),r.current={},r.defaults={},t.fill?r.defaults.fill=t.fill:r.defaults.fill="#BBDDFF",t.stroke?r.defaults.stroke=t.stroke:r.defaults.stroke="#88AADD",t.rootFill?r.defaults.rootFill=t.rootFill:r.defaults.rootFill="#FF6666",t.rootStroke?r.defaults.rootStroke=t.rootStroke:r.defaults.rootStroke="#DD2222",r.clearable&&r.clear();var i=new a(e);i.traverse(function(e,t,i,n){if(e.contents){var o=r.addText(0,0,e.contents);e.text=o}if(n)var l=r.addRectangle(0,0,5,5,2,2,{fill:r.defaults.fill,stroke:r.defaults.stroke,child:e.text});else var l=r.addRectangle(0,0,5,5,2,2,{fill:r.defaults.rootFill,stroke:r.defaults.rootStroke,child:e.text});e.rect=l}),i.initialize(),i.traverse(function(e,i,n,o){r.moveText(e.text,e.x,e.y),r.moveRectangle(e.rect,e.x,e.y);var a=l(e,o);if(e.offset=a,o){if("bezier"==t.lineType){var s=r.addBezier(o.x+a.parX,o.y+a.parY,e.x+a.x,e.y+a.y,{stroke:"#6688BB"});e.line=s}else{t.lineType="line";var d=r.addLine(o.x+a.parX,o.y+a.parY,e.x+a.x,e.y+a.y,{stroke:"#6688BB"});e.line=d}e.direction=r.addCircle(e.x+a.x,e.y+a.y,2,{fill:"#6688BB",stroke:"#5577AA"})}}),t.anchor||(t.anchor="none"),r.anchor=t.anchor,i.dragging={},i.traverse(function(e,t,o,l){e.rect.addEventListener("mousedown",function(t){n(r,e),i.dragging.node=e,i.dragging.parent=l,i.dragging.anchorX=t.clientX-e.x,i.dragging.anchorY=t.clientY-e.y}),e.rect.addEventListener("touchstart",function(t){n(r,e),i.dragging.node=e,i.dragging.parent=l,i.dragging.anchorX=t.touches[0].clientX-e.x,i.dragging.anchorY=t.touches[0].clientY-e.y})}),r.dom.addEventListener("mousedown",function(e){e.target==r.dom&&(i.dragging.dom=!0,i.dragging.currX=e.clientX,i.dragging.currY=e.clientY)}),r.dom.addEventListener("touchstart",function(e){e.target==r.dom&&(i.dragging.dom=!0,i.dragging.currX=e.touches[0].clientX,i.dragging.currY=e.touches[0].clientY)}),r.dom.addEventListener("mousemove",function(e){o(r,i,i.dragging.node,i.dragging.parent,e.clientX,e.clientY,{lineType:t.lineType,anchor:r.anchor})}),r.dom.addEventListener("touchmove",function(e){o(r,i,i.dragging.node,i.dragging.parent,e.touches[0].clientX,e.touches[0].clientY,{lineType:t.lineType,anchor:r.anchor})}),r.dom.addEventListener("mouseup",function(e){i.dragging.node=void 0,i.dragging.dom=!1}),r.dom.addEventListener("touchend",function(e){i.dragging.node=void 0,i.dragging.dom=!1})},t.exports=i},{"./Tree":2}],2:[function(e,t,r){"use strict";function i(e){this.root=e}function n(e,t,r,i,o){if(void 0!=e&&void 0!=t&&(void 0==r&&(r=0),void 0==i&&(i=0),t(e,r,i,o),e.children))for(var l=0;l<e.children.length;l++)n(e.children[l],t,r+1,l,e)}function o(e,t,r,i){if(void 0!=e&&void 0!=t){void 0==r&&(r=0),void 0==i&&(i=0);var n=[],o=[];for(n.push(e);n.length>0;){var l=n.splice(0,1)[0];if(t(l,r,i),i++,l.children)for(var a=0;a<l.children.length;a++)o.push(l.children[a]);0==n.length&&(n=o,o=[],r++,i=0)}}}function l(e){void 0===e?this.contents="":this.contents=e,this.children=[]}var a=10;i.prototype.initialize=function(){var e=this.root;i.maxIndex||(i.maxIndex=0);var t=i.maxIndex;null!=e&&(o(e,function(e,r,n){n+1>i.maxIndex&&(i.maxIndex=n+1),e.hasOwnProperty("x")||(e.x=165*r),e.hasOwnProperty("y")||(e.y=(n+t)*(e.rect.height.baseVal.value+a))}),i.maxIndex+=t)},i.prototype.traverse=function(e){n(this.root,e)},i.prototype.traverseBFS=function(e){o(this.root,e)},l.prototype.addChild=function(e){var t=new l(e);return this.children.push(t),t},l.prototype.removeChild=function(e){for(var t=0;t<this.children.length;t++)if(this.children[t]===e)return this.children.pop(e),e;return null},t.exports=i},{}],3:[function(e,t,r){var i=e("../component/SVG"),n={SVG:i};t.exports=n},{"../component/SVG":1}],4:[function(e,t,r){"use strict";window.trees=e("./core/init")},{"./core/init":3}]},{},[4]);